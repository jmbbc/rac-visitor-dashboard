<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Borang Daftar Pelawat ‚Äî Banjaria Court</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Optional utilities -->
  <script src="https://v1.tailwindcss.com"></script>

  <!-- main site CSS -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* Autocomplete dropdown */
    .autocomplete-wrap { position: relative; }
    .autocomplete-list {
      position: absolute;
      z-index: 9999;
      left: 0;
      right: 0;
      margin-top: 6px;
      background: var(--card, #fff);
      border: 1px solid var(--input-border, #e5e7eb);
      border-radius: 12px;
      max-height: 320px;
      overflow: auto;
      box-shadow: 0 12px 40px rgba(2,6,23,0.12);
      padding: 6px 8px;
    }
    .autocomplete-item { padding: 12px 14px; cursor: pointer; font-family: inherit; font-size:15px; border-radius:8px; }
    .autocomplete-item[aria-selected="true"], .autocomplete-item:hover { background: #3b82f6; color: #fff; }
    .autocomplete-header { font-weight:700; padding:6px 10px; background:transparent; cursor:default; color:var(--muted,#374151); font-size:13px; }
    .autocomplete-empty { padding: 10px; color: var(--muted,#6b7280); }

    /* Pilihan rapi: checkbox + label + nota sejajar kemas */
    .form-row.confirm-row {
      display: flex !important;
      align-items: center !important;
      gap: 10px !important;
      padding: 0 !important;
      margin: 0 !important;
      width: 100%;
      box-sizing: border-box;
    }
    .form-row.confirm-row .confirm-left {
      display: inline-flex !important;
      align-items: center !important;
      gap: 8px !important;
      margin: 0 !important;
    }
    .form-row.confirm-row input[type="checkbox"] {
      display: inline-block !important;
      margin: 0 !important;
      width: 18px !important;
      height: 18px !important;
      flex: 0 0 18px !important;
      vertical-align: middle !important;
      accent-color: #2563eb;
    }
    .form-row.confirm-row label[for="confirmAgree"] {
      display: inline-block !important;
      margin: 0 !important;
      line-height: 1.2 !important;
      cursor: pointer;
      font-weight: 600;
    }
    .form-row.confirm-row .field-note {
      margin-left: 8px !important;
      color: var(--muted, #6b7280) !important;
      font-size: 12px !important;
      white-space: nowrap;
    }
    .form-row.confirm-row .confirm-left,
    .form-row.confirm-row .field-note,
    .form-row.confirm-row label,
    .form-row.confirm-row input[type="checkbox"] {
      min-width: 0 !important;
    }
    @media (max-width: 680px) {
      .form-row.confirm-row { flex-direction: column; align-items: flex-start; gap: 6px; }
      .form-row.confirm-row .field-note { margin-left: 0; }
    }
    /* keep desktop layout default for confirm-row: no forced margin-left (we use section grouping) */
  </style>
</head>

  <script>
  // remove inline style on autocomplete-wrap that may override CSS on mobile
  (function(){
    const el = document.querySelector('.autocomplete-wrap[style]');
    if (el) el.removeAttribute('style');
    // also force reflow on mobile/responsive change
    window.addEventListener('resize', ()=> {
      document.querySelectorAll('.autocomplete-wrap').forEach(e => e.style.width = '');
    });
  })();
</script>

  
<body>
  <main class="container">
    <section class="card">
      <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div>
          <a href="index.html" class="small">‚Üê Kembali ke Banjaria Court</a>
          <h1 style="margin:6px 0 0 0">Borang Daftar Pelawat ‚Äî Banjaria Court</h1>
          <p class="small" style="margin:6px 0 0 0">Sila lengkapkan maklumat. Medan bertanda <span style="color:#ef4444;font-weight:700">*</span> wajib diisi.</p>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <!-- Theme toggle removed: default light theme -->
        </div>
      </header>

      <form id="visitorForm" autocomplete="off" novalidate>
        <!-- Bahagian 1 -->
        <div class="form-section section-1">
          <div class="form-section-header">
            <div class="icon" aria-hidden="true">üè†</div>
            <h3 class="section-title" style="margin:0">Bahagian 1 ‚Äî Butiran Penghuni</h3>
          </div>

       <div class="inline-two">
  <div class="form-row">
    <label for="hostUnit" class="required">Unit rumah</label>
    <div class="autocomplete-wrap">
      <input id="hostUnit" name="hostUnit" required aria-required="true" placeholder="Contoh: A-12-03" aria-describedby="unitHelp" aria-controls="unitSuggestions" aria-expanded="false" aria-autocomplete="list" role="combobox" autocomplete="off" />
      <div id="unitSuggestions" class="autocomplete-list" role="listbox" aria-label="Cadangan unit" hidden></div>
    </div>
    <div id="unitHelp" class="field-note">Taip awalan seperti <strong>A-1</strong> untuk lihat A-1-1, A-1-2 dan seterusnya.</div>
  </div>
</div>


          <div class="form-row">
            <label for="hostName" class="required">Nama penghuni</label>
            <input id="hostName" name="hostName" required aria-required="true" placeholder="Nama penghuni" />
          </div>

        <div class="form-row span-2">
          <label for="hostPhone">Nombor telefon penghuni</label>
          <input id="hostPhone" name="hostPhone" type="tel" inputmode="tel" placeholder="012-3456789" />
        </div>
        <hr style="border:none;border-top:1px solid var(--input-border);margin:12px 0" />
        </div>
        <!-- Bahagian 2 -->
        <div class="form-section section-2">
          <div class="form-section-header">
            <div class="icon" aria-hidden="true">üìã</div>
            <h3 class="section-title" style="margin:0">Bahagian 2 ‚Äî Butiran Kemasukkan</h3>
          </div>

        <div class="form-row">
          <label for="category" class="required">Kategori</label>
          <select id="category" name="category" required aria-required="true">
            <option value="">‚Äî Pilih ‚Äî</option>
            <option value="Pelawat">Pelawat</option>
            <option value="Kontraktor">Kontraktor</option>
            <option value="Penghantaran Barang">Penghantaran Barang</option>
            <option value="Pindah Rumah">Pindah Rumah</option>
            <option value="Pelawat Khas">Pelawat Khas</option>
          </select>
        </div>

        <div id="subCategoryWrap" class="form-row span-2 hidden" aria-hidden="true">
          <label for="subCategory">Pilihan</label>
          <select id="subCategory" name="subCategory" aria-label="Pilihan Kategori">
            <option value="">‚Äî Pilih ‚Äî</option>
          </select>
        </div>

        <div id="subCategoryHelpWrap" class="form-row span-2 hidden" aria-hidden="true">
          <div style="grid-column: 1 / 2;"></div>
          <div id="subCategoryHelp" class="field-note" style="grid-column: 2 / 3;"></div>
        </div>

        <div class="form-row span-2">
          <label for="entryDetails">Butiran kemasukkan</label>
          <input id="entryDetails" name="entryDetails" placeholder="Contoh: Servis penghawa dingin / Hantar barang" />
        </div>

        <div id="companyWrap" class="form-row span-2 hidden">
          <label for="companyName">Nama syarikat</label>
          <input id="companyName" name="companyName" placeholder="Nama syarikat" disabled aria-hidden="true" />
        </div>

        <div class="form-row span-2">
          <label for="visitorName" class="required">Nama pelawat</label>
          <input id="visitorName" name="visitorName" required aria-required="true" placeholder="Contoh: Ahmad bin Ali" />
        </div>

        <div class="form-row">
          <label for="visitorPhone">Nombor telefon pelawat</label>
          <input id="visitorPhone" name="visitorPhone" type="tel" inputmode="tel" placeholder="012-3456789" />
        </div>

        <div class="form-row">
          <label for="stayOver">Bermalam?</label>
          <select id="stayOver" name="stayOver" disabled>
            <option value="No">Tidak Bermalam</option>
            <option value="Yes">Bermalam</option>
          </select>
        </div>

        <div class="form-row">
          <label for="eta" class="required">Tarikh ETA</label>
          <input id="eta" name="eta" type="date" required aria-required="true" />
        </div>

        <div class="form-row">
          <label for="etd">Tarikh ETD</label>
          <input id="etd" name="etd" type="date" disabled />
          <div class="field-note">ETD boleh dipilih sehingga 3 hari selepas ETA</div>
        </div>

        <hr style="border:none;border-top:1px solid var(--input-border);margin:12px 0" />

        </div>
        <!-- Bahagian 3 -->
        <div class="form-section section-3">
          <div class="form-section-header">
            <div class="icon" aria-hidden="true">üöó</div>
            <h3 class="section-title" style="margin:0">Bahagian 3 ‚Äî Butiran Kenderaan</h3>
          </div>

        <div id="vehicleSingleWrap" class="form-row">
          <label for="vehicleNo">Nombor kenderaan</label>
          <input id="vehicleNo" name="vehicleNo" placeholder="ABC1234" />
        </div>

        <div id="vehicleMultiWrap" class="form-row span-2 hidden">
          <label for="vehicleList">Nombor kenderaan</label>
          <div>
            <div id="vehicleList" class="vehicle-list" role="list"></div>
            <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
              <button type="button" id="addVehicleBtn" class="btn-ghost" disabled style="padding:6px 10px;border-radius:8px;">+ Tambah Nombor Kenderaan</button>
              <span class="field-note" style="margin-left:8px; font-size:12px; color:var(--muted);">Tekan + untuk tambah baris; gunakan ‚àí untuk keluarkan baris.</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <label for="vehicleType">Jenis kenderaan</label>
          <select id="vehicleType" name="vehicleType">
            <option value="Kereta / 4x4">Kereta / 4x4</option>
            <option value="Lori">Lori</option>
            <option value="Motosikal">Motosikal</option>
            <option value="Pejalan Kaki">Pejalan Kaki</option>
          </select>
        </div>

        </div>
        <!-- Pengesahan -->
        <div class="form-section section-4" style="margin-top:12px">
          <div class="form-section-header">
            <div class="icon" aria-hidden="true">‚úÖ</div>
            <h3 class="section-title" style="margin:0">Pengesahan</h3>
          </div>
          <fieldset style="border:0;padding:0;margin:0">
            <legend class="required sr-only">Pengesahan</legend>
            <div style="font-size:13px;color:var(--muted);line-height:1.4;margin-bottom:8px">
              Dengan ini saya mengesahkan bahawa :-
              <ol style="margin:6px 0 0 18px;padding:0">
                <li>Butiran yang di isi adalah benar.</li>
                <li>Saya juga bertanggungjawab sepenuhnya ke atas apa-apa kerosakan yang dilakukan oleh pelawat / kontraktor / syarikat, sepanjang mereka berada di dalam Banjaria Court.</li>
                <li>Saya juga akur, sekiranya data yang di isi berbeza, pihak pengurusan berhak untuk tidak benarkan masuk ke Banjaria Court.</li>
              </ol>
            </div>

            <div class="form-row confirm-row">
              <div class="confirm-left">
                <input id="confirmAgree" type="checkbox" name="confirmAgree" aria-required="true" />
                <label for="confirmAgree">Saya setuju</label>
              </div>
              <div class="field-note">Tandakan untuk meneruskan pendaftaran.</div>
            </div>
          </fieldset>
        </div>

        <!-- aksi -->
        <div class="form-actions" style="margin-top:12px">
          <div></div>
          <div class="actions">
            <button type="submit" id="submitBtn" class="btn">Hantar</button>
            <button type="button" id="clearBtn" class="btn-ghost">Kosongkan</button>
            <div id="statusMsg" role="status" aria-live="polite" class="small" style="align-self:center;margin-left:8px"></div>
          </div>
        </div>
      </form>
    </section>
  </main>

  <!-- Firebase init then visitor.js -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/visitor.js"></script>
</body>
</html>
