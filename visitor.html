<!doctype html>
<html lang="ms" class="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Borang Daftar Pelawat — Banjaria Court</title>

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">

  <!-- Optional utilities -->
  <script src="https://v1.tailwindcss.com"></script>

  <!-- main site CSS (pastikan path betul: css/style.css) -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <main class="container">
    <section class="card">
      <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div>
          <a href="index.html" class="small">← Kembali ke Banjaria Court</a>
          <h1 style="margin:6px 0 0 0">Borang Daftar Pelawat — Banjaria Court</h1>
          <p class="small" style="margin:6px 0 0 0">Sila lengkapkan maklumat. Medan bertanda <span style="color:#ef4444;font-weight:700">*</span> wajib diisi.</p>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <label for="themeToggle" class="small muted">Tema</label>
          <button id="themeToggle" style="padding:6px 10px;border-radius:6px;border:1px solid var(--input-border);background:var(--card);font-weight:600">Light</button>
        </div>
      </header>

      <form id="visitorForm" autocomplete="off" novalidate>
        <!-- Bahagian 1 -->
        <h3 style="margin:0 0 8px 0">Bahagian 1 — Butiran Penghuni</h3>

        <div class="inline-two">
          <div class="form-row">
            <label for="hostUnit" class="required">Unit rumah</label>
            <input id="hostUnit" name="hostUnit" required placeholder="Contoh: A-12-03" />
          </div>

          <div class="form-row">
            <label for="hostName" class="required">Nama penghuni</label>
            <input id="hostName" name="hostName" required placeholder="Nama penghuni" />
          </div>
        </div>

        <div class="form-row span-2">
          <label for="hostPhone">Nombor telefon penghuni</label>
          <input id="hostPhone" name="hostPhone" type="tel" inputmode="tel" placeholder="012-3456789" />
        </div>

        <hr style="border:none;border-top:1px solid var(--input-border);margin:12px 0" />

        <!-- Bahagian 2 -->
        <h3 style="margin:0 0 8px 0">Bahagian 2 — Butiran Kemasukkan</h3>

        <div class="form-row">
          <label for="category" class="required">Kategori</label>
          <select id="category" name="category" required>
            <option value="">— Pilih —</option>
            <option value="Pelawat">Pelawat</option>
            <option value="Kontraktor">Kontraktor</option>
            <option value="Penghantaran Barang">Penghantaran Barang</option>
            <option value="Pindah Rumah">Pindah Rumah</option>
            <option value="Pelawat Khas">Pelawat Khas</option>
          </select>
        </div>

        <!-- Subcategory (Masuk/Keluar/Kontraktor types) populated by JS -->
        <div id="subCategoryWrap" class="form-row span-2 hidden" aria-hidden="true">
          <label for="subCategory">Pilihan</label>
          <select id="subCategory" name="subCategory" aria-label="Pilihan Kategori">
            <option value="">— Pilih —</option>
          </select>
        </div>

        <!-- Subcategory help text -->
        <div id="subCategoryHelpWrap" class="form-row span-2 hidden" aria-hidden="true">
          <div style="grid-column: 1 / 2;"></div>
          <div id="subCategoryHelp" class="field-note" style="grid-column: 2 / 3;"></div>
        </div>

        <div class="form-row span-2">
          <label for="entryDetails">Butiran kemasukkan</label>
          <input id="entryDetails" name="entryDetails" placeholder="Contoh: Servis penghawa dingin / Hantar barang" />
        </div>

        <div id="companyWrap" class="form-row span-2 hidden">
          <label for="companyName">Nama syarikat</label>
          <input id="companyName" name="companyName" placeholder="Nama syarikat" disabled aria-hidden="true" />
        </div>

        <div class="form-row span-2">
          <label for="visitorName" class="required">Nama pelawat</label>
          <input id="visitorName" name="visitorName" required placeholder="Contoh: Ahmad bin Ali" />
        </div>

        <div class="form-row">
          <label for="visitorPhone">Nombor telefon pelawat</label>
          <input id="visitorPhone" name="visitorPhone" type="tel" inputmode="tel" placeholder="012-3456789" />
        </div>

        <div class="form-row">
          <label for="stayOver">Bermalam?</label>
          <select id="stayOver" name="stayOver" disabled>
            <option value="No">Tidak Bermalam</option>
            <option value="Yes">Bermalam</option>
          </select>
        </div>

        <div class="form-row">
          <label for="eta" class="required">Tarikh ETA</label>
          <input id="eta" name="eta" type="date" required />
        </div>

        <div class="form-row">
          <label for="etd">Tarikh ETD</label>
          <input id="etd" name="etd" type="date" disabled />
          <div class="field-note">ETD boleh dipilih sehingga 3 hari selepas ETA</div>
        </div>

        <hr style="border:none;border-top:1px solid var(--input-border);margin:12px 0" />

        <!-- Bahagian 3 -->
        <h3 style="margin:0 0 8px 0">Bahagian 3 — Butiran Kenderaan</h3>

        <div id="vehicleSingleWrap" class="form-row">
          <label for="vehicleNo">Nombor kenderaan</label>
          <input id="vehicleNo" name="vehicleNo" placeholder="ABC1234" />
        </div>

        <div id="vehicleMultiWrap" class="form-row span-2 hidden">
          <label for="vehicleList">Nombor kenderaan</label>
          <div>
            <div id="vehicleList" class="vehicle-list" role="list"></div>
            <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
              <button type="button" id="addVehicleBtn" class="btn-ghost" disabled style="padding:6px 10px;border-radius:8px;">+ Tambah Nombor Kenderaan</button>
              <span class="field-note" style="margin-left:8px; font-size:12px; color:var(--muted);">Tekan + untuk tambah baris; gunakan − untuk keluarkan baris.</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <label for="vehicleType">Jenis kenderaan</label>
          <select id="vehicleType" name="vehicleType">
            <option value="Kereta / 4x4">Kereta / 4x4</option>
            <option value="Lori">Lori</option>
            <option value="Motosikal">Motosikal</option>
            <option value="Pejalan Kaki">Pejalan Kaki</option>
          </select>
        </div>

        <!-- aksi -->
        <div class="form-actions" style="margin-top:6px">
          <div></div>
          <div class="actions">
            <button type="submit" id="submitBtn" class="btn">Hantar</button>
            <button type="button" id="clearBtn" class="btn-ghost">Kosongkan</button>
            <div id="statusMsg" class="small" style="align-self:center;margin-left:8px"></div>
          </div>
        </div>
      </form>
    </section>
  </main>

  <!-- Firebase init then visitor.js -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/visitor.js"></script>
</body>
</html>
